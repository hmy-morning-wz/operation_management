webpackJsonp([1],{100:function(e,t,r){var a=r(79)("iterator"),i=!1;try{var o=[7][a]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],n=o[a]();n.next=function(){return{done:r=!0}},o[a]=function(){return n},e(o)}catch(e){}return r}},101:function(e,t,r){var a=r(80),i=r(88).set,o=a.MutationObserver||a.WebKitMutationObserver,n=a.process,l=a.Promise,s="process"==r(86)(n);e.exports=function(){var e,t,r,u=function(){var a,i;for(s&&(a=n.domain)&&a.exit();e;){i=e.fn,e=e.next;try{i()}catch(a){throw e?r():t=void 0,a}}t=void 0,a&&a.enter()};if(s)r=function(){n.nextTick(u)};else if(o){var c=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),r=function(){d.data=c=!c}}else if(l&&l.resolve){var p=l.resolve();r=function(){p.then(u)}}else r=function(){i.call(a,u)};return function(a){var i={fn:a,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},102:function(e,t,r){var a=r(107);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:a(e,i,t[i]);return e}},103:function(e,t,r){"use strict";var a=r(80),i=r(2),o=r(92),n=r(93),l=r(79)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:a[e];n&&t&&!t[l]&&o.f(t,l,{configurable:!0,get:function(){return this}})}},104:function(e,t,r){var a=r(85),i=r(89),o=r(79)("species");e.exports=function(e,t){var r,n=a(e).constructor;return void 0===n||void 0==(r=a(n)[o])?t:i(r)}},105:function(e,t,r){var a=r(87),i=r(79)("iterator"),o=r(90);e.exports=r(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[a(e)]}},106:function(e,t,r){"use strict";var a,i,o,n=r(115),l=r(80),s=r(84),u=r(87),c=r(19),d=r(114),p=r(89),m=r(95),h=r(96),v=r(104),f=r(88).set,g=r(101)(),y="Promise",x=l.TypeError,b=l.process,F=l[y],T="process"==u(b=l.process),_=function(){},w=!!function(){try{var e=F.resolve(1),t=(e.constructor={})[r(79)("species")]=function(e){e(_,_)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(_)instanceof t}catch(e){}}(),k=function(e,t){return e===t||e===F&&t===o},P=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},C=function(e){return k(F,e)?new S(e):new i(e)},S=i=function(e){var t,r;this.promise=new e(function(e,a){if(void 0!==t||void 0!==r)throw x("Bad Promise constructor");t=e,r=a}),this.resolve=p(t),this.reject=p(r)},L=function(e){try{e()}catch(e){return{error:e}}},V=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var a=e._v,i=1==e._s,o=0,n=function(t){var r,o,n=i?t.ok:t.fail,l=t.resolve,s=t.reject,u=t.domain;try{n?(i||(2==e._h&&A(e),e._h=1),!0===n?r=a:(u&&u.enter(),r=n(a),u&&u.exit()),r===t.promise?s(x("Promise-chain cycle")):(o=P(r))?o.call(r,l,s):l(r)):s(a)}catch(e){s(e)}};r.length>o;)n(r[o++]);e._c=[],e._n=!1,t&&!e._h&&$(e)})}},$=function(e){f.call(l,function(){var t,r,a,i=e._v;if(N(e)&&(t=L(function(){T?b.emit("unhandledRejection",i,e):(r=l.onunhandledrejection)?r({promise:e,reason:i}):(a=l.console)&&a.error&&a.error("Unhandled promise rejection",i)}),e._h=T||N(e)?2:1),e._a=void 0,t)throw t.error})},N=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,a=0;r.length>a;)if((t=r[a++]).fail||!N(t.promise))return!1;return!0},A=function(e){f.call(l,function(){var t;T?b.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},O=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),V(t,!0))},E=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw x("Promise can't be resolved itself");(t=P(e))?g(function(){var a={_w:r,_d:!1};try{t.call(e,s(E,a,1),s(O,a,1))}catch(e){O.call(a,e)}}):(r._v=e,r._s=1,V(r,!1))}catch(e){O.call({_w:r,_d:!1},e)}}};w||(F=function(e){m(this,F,y,"_h"),p(e),a.call(this);try{e(s(E,this,1),s(O,this,1))}catch(e){O.call(this,e)}},(a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(102)(F.prototype,{then:function(e,t){var r=C(v(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=T?b.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&V(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),S=function(){var e=new a;this.promise=e,this.resolve=s(E,e,1),this.reject=s(O,e,1)}),c(c.G+c.W+c.F*!w,{Promise:F}),r(116)(F,y),r(103)(y),o=r(2)[y],c(c.S+c.F*!w,y,{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),c(c.S+c.F*(n||!w),y,{resolve:function(e){if(e instanceof F&&k(e.constructor,this))return e;var t=C(this);return(0,t.resolve)(e),t.promise}}),c(c.S+c.F*!(w&&r(100)(function(e){F.all(e).catch(_)})),y,{all:function(e){var t=this,r=C(t),a=r.resolve,i=r.reject,o=L(function(){var r=[],o=0,n=1;h(e,!1,function(e){var l=o++,s=!1;r.push(void 0),n++,t.resolve(e).then(function(e){s||(s=!0,r[l]=e,--n||a(r))},i)}),--n||a(r)});return o&&i(o.error),r.promise},race:function(e){var t=this,r=C(t),a=r.reject,i=L(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,a)})});return i&&a(i.error),r.promise}})},107:function(e,t,r){e.exports=r(0)(10)},108:function(e,t,r){e.exports=r(0)(119)},109:function(e,t,r){e.exports=r(0)(130)},110:function(e,t,r){e.exports=r(0)(143)},111:function(e,t,r){e.exports=r(0)(146)},112:function(e,t,r){e.exports=r(0)(147)},113:function(e,t,r){e.exports=r(0)(151)},114:function(e,t,r){e.exports=r(0)(19)},115:function(e,t,r){e.exports=r(0)(28)},116:function(e,t,r){e.exports=r(0)(30)},117:function(e,t,r){e.exports=r(0)(55)},118:function(e,t,r){e.exports=r(0)(74)},119:function(e,t,r){"use strict";var a=function(e){return("0"+e).slice(-2)},i=function e(t){this.d=t instanceof e?function(e){return new Date(e.getTime())}(t.d):t?new Date(t):new Date};i.prototype={addMonths:function(e){var t=this.d;return this.d.setMonth(t.getMonth()+e),this},addDate:function(e){var t=this.d;return this.d.setDate(t.getDate()+e),this},format:function(e){e||(e="YYYY-MM-DD");var t=this.d;return e.replace("YYYY",t.getFullYear()).replace("MM",a(t.getMonth()+1)).replace("DD",a(t.getDate())).replace("d",t.getDay()).replace("HH",a(t.getHours())).replace("mm",a(t.getMinutes())).replace("ss",a(t.getSeconds()))},formats:function(e){e||(e="YYYY-MM-DD HH:mm:ss");var t=this.d;return e.replace("YYYY",t.getFullYear()).replace("MM",a(t.getMonth()+1)).replace("DD",a(t.getDate())).replace("d",t.getDay()).replace("HH",a(t.getHours())).replace("mm",a(t.getMinutes())).replace("ss",a(t.getSeconds()))},year:function(e){return e?(this.d.setYear(e),this):this.d.getFullYear()},month:function(e){return e?(this.d.setMonth(e),this):this.d.getMonth()},date:function(e){return e?(this.d.setDate(e),this):this.d.getDate()},day:function(){return this.d.getDay()}},t.a=function(e){return new i(e)}},120:function(e,t,r){e.exports={default:r(122),__esModule:!0}},121:function(e,t,r){var a=r(18)(r(128),r(131),function(e){r(130)},"data-v-791f223a",null);e.exports=a.exports},122:function(e,t,r){var a=r(2),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},123:function(e,t,r){var a=r(18)(r(124),r(127),function(e){r(126)},null,null);e.exports=a.exports},124:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},created:function(){},computed:{},methods:{}}},125:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,".header_container{background-color:#eff2f7;height:60px;display:flex;justify-content:space-between;align-items:center;padding-left:20px}.avator{border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},126:function(e,t,r){var a=r(125);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("ddadc514",a,!0)},127:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(t,a){return r("el-breadcrumb-item",{key:"index"},[e._v(e._s(t))])})],2)],1)},staticRenderFns:[]}},128:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["loadingShow"],data:function(){return{}},created:function(){},methods:{}}},129:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,'.logo_loading[data-v-791f223a]{position:fixed;left:0;top:0;right:0;bottom:0;z-index:2000;background-color:rgba(0,0,0,.8)}.logo_loading .bg[data-v-791f223a]{width:120px;height:120px;zoom:.5;border-radius:10px;margin:0 auto;top:35%;position:relative;background-color:#fff}.logo_loading .circle[data-v-791f223a]{position:absolute;width:100px;height:100px;left:8px;top:8px;right:0;background:url("http://static.apitops.com/openimages/princessbay/images/loading-circle.png") 50% no-repeat;background-size:100%;z-index:98;-webkit-animation:load-data-v-791f223a 1.4s infinite linear;animation:load-data-v-791f223a 1.4s infinite linear}@-webkit-keyframes load{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load-data-v-791f223a{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""])},130:function(e,t,r){var a=r(129);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("1cb42750",a,!0)},131:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return this.loadingShow?t("div",{staticClass:"logo_loading",attrs:{id:"loading"}},[this._m(0)]):this._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bg"},[t("div",{staticClass:"circle"})])}]}},132:function(e,t,r){"use strict";var a=r(83),i=r.n(a),o=r(81),n=(r(82),r(82)),l=o.a.nethost;t.a={getVoucherList:function(e){var t=l+"voucher/voucherTemplate/templateList";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},addVoucher:function(e){var t=l+"voucher/voucherTemplate/addTemplate";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},addVoucherTemplate:function(e){var t=l+"voucher/voucherTemplate/addVoucherTemplate";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},upVoucher:function(e){var t=l+"voucher/voucherTemplate/updateTemplate";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getVoucher:function(e){var t=l+"voucher/voucherTemplate/templateInfo?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},delVoucher:function(e){var t=l+"voucher/voucherTemplate/deleteVoucherTemeplate?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},endVoucher:function(e){var t=l+"voucher/voucherTemplate/endVoucherTemeplate?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},addApliVoucher:function(e){var t=l+"voucher/alipayVoucher/addAlipayTemplate";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getVoucherApliList:function(e){var t=l+"voucher/alipayVoucher/aliTemplateList";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},getApliVoucher:function(e){var t=l+"voucher/alipayVoucher/alipayTemplateInfo?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},delApliVoucher:function(e){var t=l+"voucher/alipayVoucher/deleteAlipayTemeplate?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},editApliVoucher:function(e){var t=l+"voucher/alipayVoucher/updateAliTemplate";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},endApliVoucher:function(e){var t=l+"voucher/alipayVoucher/endAlipayTemeplate?temeplateId="+e;return r.i(n.b)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})}}},135:function(e,t,r){"use strict";var a=r(83),i=r.n(a),o=r(81),n=(r(82),r(82)),l=o.a.nethost;t.a={getCoupTypeList:function(){var e=l+"voucher/alipass/type/querySupportTypeList";return r.i(n.a)(e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getTemplateList:function(e){var t=l+"voucher/alipass/type/queryAlipassTypeList";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},parseTplContent:function(e){var t=l+"voucher/alipass/type/parseTplContent";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},addAlipassType:function(e){var t=l+"/voucher/alipass/type/addOrUpdateAlipassType";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},getAlipassDetailById:function(e){var t=l+"/voucher/alipass/type/getAlipassDetailById?alipassTypeId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},queryAlipassTypeList:function(e){var t=l+"/voucher/alipass/placeholder/queryAlipassTypeList?alipassTypeId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})}}},152:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(120),i=r.n(a),o=r(132),n=(r(81),r(119)),l=r(121),s=r.n(l),u=r(123),c=r.n(u);t.default={data:function(){return{loadingShow:!1,startTime:"",endTime:"",confirmUri:"",ruleForm:{pid:"",totalAmount:"",voucherType:"",brandName:"",fundAccount:"",publishStartTime:"",publishEndTime:"",voucherValidPeriod:{type:"ABSOLUTE",start:"",end:"",duration:"",unit:"DAY"},amount:"",floorAmount:"",voucherQuantity:"",hasLimitQuantity:"0",perDailyQuantity:"",perMaxQuantity:"",voucherDescription:""},timeType:[{type:"ABSOLUTE",label:"绝对时间"},{type:"RELATIVE",label:"相对时间"}],voucherList:[{type:"FIX_VOUCHER",label:"代金券"},{type:"COUPON",label:"红包"}],rules:{pid:[{required:!0,message:"请输入商户id",trigger:"blur"}],totalAmount:[{required:!0,message:"请输入红包总数",trigger:"blur"}],fundAccount:[{required:!0,message:"请输入登陆帐号",trigger:"blur"}],voucherQuantity:[{required:!0,message:"请输入券总数",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],floorAmount:[{required:!0,message:"请输入最低消费金额",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],voucherType:[{required:!0,message:"请选择优惠券类型",trigger:"change"}],brandName:[{required:!0,message:"请输入赞助商名字",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}],amount:[{required:!0,message:"请输入面额",trigger:"blur"}],hasLimitQuantity:[{required:!0,message:"请选择次数限制",trigger:"change"}],publishStartTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],publishEndTime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}]},logoImg:"./static/images/1.jpg"}},created:function(){console.log(this.ruleForm.voucherDescription)},components:{AppLoading:s.a,headTop:c.a},methods:{inputOnlyFix:function(){var e=event.target.value;e=e.replace(/[^\d,\.]/g,""),this.ruleForm.floorAmount=e},handleChange:function(){"RELATIVE"===this.ruleForm.voucherValidPeriod.type?(this.start="",this.end=""):this.duration=""},open:function(){var e=this;this.$alert('<div>点击下面付款地址去付款：<a href="'+this.confirmUri+'">'+this.confirmUri+"</a></div><div>","付款",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",callback:function(t){e.$router.replace("/couponList?difftype=2")}})},handleStartTime:function(){this.startTime=r.i(n.a)(this.ruleForm.voucherValidPeriod.start).formats()},handleEndTime:function(){this.endTime=r.i(n.a)(this.ruleForm.voucherValidPeriod.end).formats()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(console.log(e),e){var a=JSON.parse(i()(t.ruleForm));if(a.publishStartTime=r.i(n.a)(t.ruleForm.publishStartTime).formats(),a.publishEndTime=r.i(n.a)(t.ruleForm.publishEndTime).formats(),"ABSOLUTE"===a.voucherValidPeriod.type){if(!a.voucherValidPeriod.start)return void t.$message.error("开始时间不能为空！");if(!a.voucherValidPeriod.end)return void t.$message.error("结束时间不能为空！");a.voucherValidPeriod.start=r.i(n.a)(t.ruleForm.voucherValidPeriod.start).formats(),a.voucherValidPeriod.end=r.i(n.a)(t.ruleForm.voucherValidPeriod.end).formats()}else if(!a.voucherValidPeriod.duration)return void t.$message.error("输入天数不能为空！");a.voucherDescription=i()(a.voucherDescription.split(";")),a.voucherValidPeriod=i()(a.voucherValidPeriod),o.a.addApliVoucher(a).then(function(e){t.$message({message:"保存成功",type:"success"}),t.confirmUri=e.confirmUri,console.log(t.confirmUri),t.open()},function(e){t.$message.error(e.message||"请求服务器连接失败!")})}})}},computed:{beginPickerOptions:function(){var e=this;return{disabledDate:function(t){if(e.ruleForm.publishEndTime)return t.getTime()>e.ruleForm.publishEndTime}}},endPickerOptions:function(){var e=this;return{disabledDate:function(t){return t.getTime()<e.ruleForm.publishStartTime}}}},watch:{}}},153:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(120),i=r.n(a),o=r(132),n=r(81),l=r(119),s=r(121),u=r.n(s),c=r(320),d=r.n(c),p=r(322),m=r.n(p);t.default={data:function(){return{loadingShow:!1,difftype:this.$route.query.difftype,activeName:"first",startTime:"",endTime:"",loading:!1,coupList:[{id:1,value:"代金券"},{id:2,value:"兑换券"},{id:3,value:"跳转券"}],codeList:[{id:1,value:"单码"},{id:2,value:"多码"}],noticList:[{id:"sms",value:"短信通知"},{id:"0",value:"不通知"}],ruleForm:{voucherType:"",voucherName:"",brandLogo:"",brandName:"",publishStartTime:"",publishEndTime:"",uploadimgUrl:n.a.netImg+"prefer/api/fileUploadOne",voucherValidPeriod:{type:"ABSOLUTE",start:"",end:"",duration:"",unit:""},amount:"",floorAmount:"",voucherQuantity:"",hasLimitMoney:"0",hasLimitQuantity:"0",perDailyQuantity:"",perMaxQuantity:"",hasLimitGoods:"0",goods:"",voucherDescription:"",notifyType:"0",verifyUrl:"",notifyId:"",voucherIntroduction:"",exchangeType:"",exchangeCode:""},timeType:[{type:"ABSOLUTE",label:"绝对时间"},{type:"RELATIVE",label:"相对时间"}],uploadimgUrl:n.a.netImg+"prefer/api/fileUploadOne",rules:{voucherType:[{required:!0,message:"请输入优惠券类型",trigger:"change"}],exchangeType:[{required:!0,message:"请输入兑换码类型",trigger:"change"}],exchangeCode:[{required:!0,message:"请输入兑换码内容",trigger:"blur"}],voucherQuantity:[{required:!0,message:"请输入券总数",trigger:"blur"}],notifyId:[{required:!0,message:"请输入短信模版",trigger:"blur"}],verifyUrl:[{required:!0,message:"请输入url地址",trigger:"blur"}],voucherName:[{required:!0,message:"请输入优惠券名字",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],brandLogo:[{required:!0,message:"url不能为空",trigger:"change"}],brandName:[{required:!0,message:"请输入赞助商名字",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],amount:[{required:!0,message:"请输入面额",trigger:"blur"}],hasLimitMoney:[{required:!0,message:"请选择输入条件",trigger:"change"}],hasLimitQuantity:[{required:!0,message:"请选择次数限制",trigger:"change"}],hasLimitGoods:[{required:!0,message:"请选择限定商品类型",trigger:"change"}],publishStartTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],publishEndTime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}]}}},created:function(){1==this.difftype?this.activeName="first":2==this.difftype?this.activeName="second":this.activeName="third"},components:{AppLoading:u.a,addApliCoupon:d.a,apliTemplateCoupon:m.a},methods:{handleClick:function(e,t){console.log(e,t)},handleStartTime:function(){this.startTime=r.i(l.a)(this.ruleForm.voucherValidPeriod.start).formats()},handleEndTime:function(){this.endTime=r.i(l.a)(this.ruleForm.voucherValidPeriod.end).formats()},handleExceed:function(e,t){this.$message.warning("当前限制上传一张图片！")},handleRemove:function(e,t){this.$refs.upload.clearFiles(),this.ruleForm.brandLogo=""},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleAvatarSuccess:function(e,t){this.ruleForm.brandLogo="https://"+e.data},beforeAvatarUpload:function(e){var t=e.size/1024/1024<10,r=e.type.indexOf("image")>-1;return r||this.$message.error("只能上传图片!"),t||this.$message.error("上传文件不能超过 10MB!"),t&&r},handleBlur:function(){2==this.ruleForm.exchangeType&&(this.ruleForm.voucherQuantity=this.ruleForm.exchangeCode.split(",").length)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=JSON.parse(i()(t.ruleForm));if(a.publishStartTime=r.i(l.a)(t.ruleForm.publishStartTime).formats(),a.publishEndTime=r.i(l.a)(t.ruleForm.publishEndTime).formats(),"ABSOLUTE"===a.voucherValidPeriod.type){if(!a.voucherValidPeriod.start)return void t.$message.error("开始时间不能为空！");if(!a.voucherValidPeriod.end)return void t.$message.error("结束时间不能为空！");a.voucherValidPeriod.start=r.i(l.a)(t.ruleForm.voucherValidPeriod.start).formats(),a.voucherValidPeriod.end=r.i(l.a)(t.ruleForm.voucherValidPeriod.end).formats()}else if(!a.voucherValidPeriod.duration)return void t.$message.error("输入天数不能为空！");a.voucherValidPeriod=i()(a.voucherValidPeriod),1==t.ruleForm.voucherType?a.voucherType=1:2==t.ruleForm.voucherType?(a.voucherType=2,2==t.ruleForm.exchangeType&&(a.voucherQuantity=t.ruleForm.exchangeCode.split(",").length)):a.voucherType=3,t.loading=!0,o.a.addVoucherTemplate(a).then(function(e){t.loading=!1,t.$message({message:"保存成功",type:"success"});t.$router.replace("/couponList?difftype=1")},function(e){t.loading=!1,t.$message.error(e.sub_msg||"请求服务器连接失败!")})}})},open:function(){var e=this;this.$msgbox({title:"消息",message:h("p",null,[h("span",null,"内容可以是 "),h("i",{style:"color: teal"},"VNode")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,t,r){"confirm"===e?(t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",setTimeout(function(){r(),setTimeout(function(){t.confirmButtonLoading=!1},300)},3e3)):r()}}).then(function(t){e.$message({type:"info",message:"action: "+t})})}},computed:{beginPickerOptions:function(){var e=this;return{disabledDate:function(t){if(e.ruleForm.publishEndTime)return t.getTime()>e.ruleForm.publishEndTime}}},endPickerOptions:function(){var e=this;return{disabledDate:function(t){return t.getTime()<e.ruleForm.publishStartTime}}}},watch:{}}},157:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(120),i=r.n(a),o=r(132),n=r(135),l=r(81),s=r(119);t.default={data:function(){return{fullscreenLoading:!1,startTime:"",endTime:"",dateIndex:"",couponType:"",pictUrlType:"",codeList:[{id:1,value:"单码"},{id:2,value:"多码"}],uploadimgUrl:l.a.netImg+"prefer/api/fileUploadOne",alipassTypeList:[],ruleForm:{alipassTypeList:[{placeholder:"",fieldType:"",content:"",description:""}],platformType:3,totalAmount:"",alipassTypeId:"",voucherName:"",brandName:"",publishStartTime:"",publishEndTime:"",paramList:[],voucherValidPeriod:{type:"ABSOLUTE",start:"",end:"",duration:"",unit:"DAY"},voucherQuantity:"",hasLimitQuantity:"0",perDailyQuantity:"",perMaxQuantity:"",voucherDescription:"",verifyUrl:"",exchangeType:"",exchangeCode:""},timeType:[{type:"ABSOLUTE",label:"绝对时间"},{type:"RELATIVE",label:"相对时间"}],voucherList:[],rules:{totalAmount:[{required:!0,message:"请输入红包总数",trigger:"blur"}],voucherName:[{required:!0,message:"请输入优惠券名字",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],voucherQuantity:[{required:!0,message:"请输入券总数",trigger:"blur"}],alipassTypeId:[{required:!0,message:"请选择优惠券类型",trigger:"change"}],brandName:[{required:!0,message:"请输入赞助商名字",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}],hasLimitQuantity:[{required:!0,message:"请选择次数限制",trigger:"change"}],publishStartTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],publishEndTime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],exchangeType:[{required:!0,message:"请输入兑换码类型",trigger:"change"}],exchangeCode:[{required:!0,message:"请输入兑换码内容",trigger:"blur"}],verifyUrl:[{required:!0,message:"请输入url地址",trigger:"blur"}]},moreNotifyOjbectRules:{moreNotifyOjbectName:[{required:!0,message:"请输入内容",trigger:"blur"}],dateTime:[{required:!0,message:"请选择时间",trigger:"change"}],pictUrl:[{required:!0,message:"请上传图片"}]},logoImg:"./static/images/1.jpg"}},created:function(){},mounted:function(){this.getTemplateList()},components:{},methods:{inputOnlyFix:function(){var e=event.target.value;e=e.replace(/[^\d,\.]/g,""),this.ruleForm.floorAmount=e},handleChange:function(){"RELATIVE"===this.ruleForm.voucherValidPeriod.type?(this.start="",this.end=""):this.duration=""},handeleType:function(){var e=this;this.voucherList instanceof Array&&this.voucherList.forEach(function(t){t.alipassTypeId==e.ruleForm.alipassTypeId&&(e.couponType=t.tag)}),this.queryAlipassTypeList(this.ruleForm.alipassTypeId)},getTemplateList:function(){var e=this;n.a.getTemplateList({}).then(function(t){e.voucherList=t.data.alipassTypeResponseList},function(t){e.$message.error(t.message||"请求服务器连接失败!")})},handleBlur:function(){2==this.ruleForm.exchangeType&&(this.ruleForm.voucherQuantity=this.ruleForm.exchangeCode.split(",").length),console.log(this.ruleForm.voucherQuantity)},handleUpload:function(e){this.pictUrlType=e},handleCoverSuccess:function(e,t){var r=this;this.ruleForm.alipassTypeList.forEach(function(t,a){a===r.pictUrlType&&(t.content="http://"+e.data)})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/jpg",r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},handleCoverDelete:function(e){var t=this;this.$confirm("是否删除图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.ruleForm.alipassTypeList.forEach(function(t,r){e===r&&(t.content="")})}).catch(function(){t.$message({type:"info",message:"已撤销"})})},queryAlipassTypeList:function(e){var t=this,r=this;n.a.queryAlipassTypeList(e).then(function(e){for(var a in r.ruleForm)"alipassTypeId"!==a&&"voucherValidPeriod"!==a&&(t.ruleForm[a]instanceof Array?t.ruleForm[a]=[]:"platformType"===a?t.ruleForm[a]=3:"hasLimitQuantity"===a?t.ruleForm[a]="0":"voucherValidPeriod"===a?t.ruleForm.voucherValidPeriod={type:"ABSOLUTE",start:"",end:"",duration:"",unit:"DAY"}:t.ruleForm[a]="");if(e.data instanceof Array){var o=[];e.data.forEach(function(e){var t={placeholder:e.placeholder,fieldType:e.fieldType,content:"",description:e.description};o.push(t)}),t.ruleForm.alipassTypeList=JSON.parse(i()(o))}},function(e){t.$message.error(e.message||"请求服务器连接失败!")})},handleStartTime:function(){this.startTime=r.i(s.a)(this.ruleForm.voucherValidPeriod.start).formats()},handleEndTime:function(){this.endTime=r.i(s.a)(this.ruleForm.voucherValidPeriod.end).formats()},handleDateType:function(e){this.dateIndex=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.ruleForm.alipassTypeList&&t.ruleForm.alipassTypeList.length>0&&t.ruleForm.alipassTypeList.forEach(function(e,a){var i={key:e.placeholder,value:e.content};t.dateIndex===a&&(i.value=r.i(s.a)(e.content).formats()),t.ruleForm.paramList.push(i)}),e){t.alipassTypeList=t.ruleForm.alipassTypeList,delete t.ruleForm.alipassTypeList;var a=JSON.parse(i()(t.ruleForm));if(a.publishStartTime=r.i(s.a)(t.ruleForm.publishStartTime).formats(),a.publishEndTime=r.i(s.a)(t.ruleForm.publishEndTime).formats(),"ABSOLUTE"===a.voucherValidPeriod.type){if(!a.voucherValidPeriod.start)return void t.$message.error("开始时间不能为空！");if(!a.voucherValidPeriod.end)return void t.$message.error("结束时间不能为空！");a.voucherValidPeriod.start=r.i(s.a)(t.ruleForm.voucherValidPeriod.start).formats(),a.voucherValidPeriod.end=r.i(s.a)(t.ruleForm.voucherValidPeriod.end).formats()}else if(!a.voucherValidPeriod.duration)return void t.$message.error("输入天数不能为空！");a.voucherDescription=i()(a.voucherDescription.split(";")),a.voucherValidPeriod=i()(a.voucherValidPeriod),t.fullscreenLoading=!0,o.a.addVoucherTemplate(a).then(function(e){t.$message({message:"保存成功",type:"success"}),t.fullscreenLoading=!1;t.$router.replace("/couponList?difftype=3")},function(e){t.ruleForm.alipassTypeList=t.alipassTypeList,t.ruleForm.paramList=[],t.fullscreenLoading=!1,t.$message.error(e.msg||"请求服务器连接失败!")})}})}},computed:{beginPickerOptions:function(){var e=this;return{disabledDate:function(t){if(e.ruleForm.publishEndTime)return t.getTime()>e.ruleForm.publishEndTime}}},endPickerOptions:function(){var e=this;return{disabledDate:function(t){return t.getTime()<e.ruleForm.publishStartTime}}}},watch:{}}},207:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,".el-message{top:150px}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block;margin:10px 10px 0 0}.header-banner{position:relative;width:120px}.deletImg{position:absolute;width:100%;height:100%;left:0;top:0;cursor:default;text-align:center;color:#fff;opacity:0;font-size:20px;background-color:rgba(0,0,0,.5);transition:opacity .3s}.deletImg:hover{opacity:1}.deletImg2{position:absolute;top:40%;left:45%}",""])},208:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,'.add-apli-acoupon .error[data-v-25391de6]{color:#f56c6c;font-size:12px}.add-apli-acoupon .exhibtion[data-v-25391de6]{width:375px}.add-apli-acoupon .exhibtion .logo[data-v-25391de6]{width:80px;height:80px;margin:0 auto}.add-apli-acoupon .exhibtion .logo img[data-v-25391de6]{width:80px;height:80px;border-radius:80px}.add-apli-acoupon .exhibtion .voucher-name[data-v-25391de6]{font-size:20px;margin:0 auto;text-align:center}.add-apli-acoupon .exhibtion .voucher-title[data-v-25391de6]{font-size:14px;text-align:center;position:relative;height:30px;line-height:30px}.add-apli-acoupon .exhibtion .voucher-title[data-v-25391de6]:after{content:"";height:1px;background-color:#e8e8e8;position:absolute;left:0;width:100%;bottom:0}.add-apli-acoupon li[data-v-25391de6]{list-style-type:disc;line-height:30px}',""])},233:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,".el-message{top:150px}",""])},234:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,'.add-acoupon .error[data-v-53d5f427]{color:#f56c6c;font-size:12px}.add-acoupon .exhibtion[data-v-53d5f427]{width:375px}.add-acoupon .exhibtion .logo[data-v-53d5f427]{width:80px;height:80px;margin:0 auto}.add-acoupon .exhibtion .logo img[data-v-53d5f427]{width:80px;height:80px;border-radius:80px}.add-acoupon .exhibtion .voucher-name[data-v-53d5f427]{font-size:20px;margin:0 auto;text-align:center}.add-acoupon .exhibtion .voucher-title[data-v-53d5f427]{font-size:14px;text-align:center;position:relative;height:30px;line-height:30px}.add-acoupon .exhibtion .voucher-title[data-v-53d5f427]:after{content:"";height:1px;background-color:#e8e8e8;position:absolute;left:0;width:100%;bottom:0}.add-acoupon li[data-v-53d5f427]{list-style-type:disc;line-height:30px}',""])},238:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,".el-message{top:150px}",""])},239:function(e,t,r){(e.exports=r(41)(!1)).push([e.i,'.add-apli-acoupon .error[data-v-6a16eb76]{color:#f56c6c;font-size:12px}.add-apli-acoupon .exhibtion[data-v-6a16eb76]{width:375px}.add-apli-acoupon .exhibtion .logo[data-v-6a16eb76]{width:80px;height:80px;margin:0 auto}.add-apli-acoupon .exhibtion .logo img[data-v-6a16eb76]{width:80px;height:80px;border-radius:80px}.add-apli-acoupon .exhibtion .voucher-name[data-v-6a16eb76]{font-size:20px;margin:0 auto;text-align:center}.add-apli-acoupon .exhibtion .voucher-title[data-v-6a16eb76]{font-size:14px;text-align:center;position:relative;height:30px;line-height:30px}.add-apli-acoupon .exhibtion .voucher-title[data-v-6a16eb76]:after{content:"";height:1px;background-color:#e8e8e8;position:absolute;left:0;width:100%;bottom:0}.add-apli-acoupon li[data-v-6a16eb76]{list-style-type:disc;line-height:30px}',""])},271:function(e,t,r){var a=r(207);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("182ff9d6",a,!0)},272:function(e,t,r){var a=r(208);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("51d7d339",a,!0)},297:function(e,t,r){var a=r(233);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("6343ec10",a,!0)},298:function(e,t,r){var a=r(234);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("6ee60c34",a,!0)},302:function(e,t,r){var a=r(238);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("ac86a366",a,!0)},303:function(e,t,r){var a=r(239);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(42)("4660fea9",a,!0)},320:function(e,t,r){var a=r(18)(r(152),r(362),function(e){r(302),r(303)},"data-v-6a16eb76",null);e.exports=a.exports},322:function(e,t,r){var a=r(18)(r(157),r(339),function(e){r(271),r(272)},"data-v-25391de6",null);e.exports=a.exports},339:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"add-apli-acoupon"},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticClass:"pl20px pt20 pr20"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"优惠券类型",prop:"alipassTypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.handeleType},model:{value:e.ruleForm.alipassTypeId,callback:function(t){e.$set(e.ruleForm,"alipassTypeId",t)},expression:"ruleForm.alipassTypeId"}},e._l(e.voucherList,function(e){return r("el-option",{key:e.alipassTypeId,attrs:{label:e.name,value:e.alipassTypeId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"优惠券名称",prop:"voucherName"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"不超过15个字",maxlength:20},model:{value:e.ruleForm.voucherName,callback:function(t){e.$set(e.ruleForm,"voucherName",t)},expression:"ruleForm.voucherName"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"COUPON"===e.couponType,expression:"couponType === 'COUPON'"}],attrs:{label:"模板总金额",prop:"totalAmount",rules:"COUPON"===e.couponType?e.rules.alipassTypeId:[{required:!1}]}},[r("el-input",{staticStyle:{width:"220px"},model:{value:e.ruleForm.totalAmount,callback:function(t){e.$set(e.ruleForm,"totalAmount",t)},expression:"ruleForm.totalAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商家名称",prop:"brandName"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入商家名称",maxlength:12},model:{value:e.ruleForm.brandName,callback:function(t){e.$set(e.ruleForm,"brandName",t)},expression:"ruleForm.brandName"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"COUPON"!==e.couponType,expression:"couponType !== 'COUPON'"}],attrs:{label:"券总数",prop:"voucherQuantity",rules:"COUPON"!==e.couponType?e.rules.voucherQuantity:[{required:!1}]}},[r("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherQuantity,callback:function(t){e.$set(e.ruleForm,"voucherQuantity",t)},expression:"ruleForm.voucherQuantity"}}),e._v(" "),r("span",[e._v("张(1-9999整数)")])],1),e._v(" "),r("el-form-item",{attrs:{label:"每人领取次数限制",prop:"hasLimitQuantity"}},[r("el-radio-group",{model:{value:e.ruleForm.hasLimitQuantity,callback:function(t){e.$set(e.ruleForm,"hasLimitQuantity",t)},expression:"ruleForm.hasLimitQuantity"}},[r("div",[r("el-radio",{attrs:{label:"0"}},[e._v("无限制")])],1),e._v(" "),r("div",[r("el-radio",{staticClass:"mr10",attrs:{label:"1"}},[e._v("单人每天可领")]),e._v(" "),r("el-input",{staticClass:"mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perDailyQuantity,callback:function(t){e.$set(e.ruleForm,"perDailyQuantity",t)},expression:"ruleForm.perDailyQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次，最多可领")]),e._v(" "),r("el-input",{staticClass:"ml10 mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perMaxQuantity,callback:function(t){e.$set(e.ruleForm,"perMaxQuantity",t)},expression:"ruleForm.perMaxQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次(1-50)整数")])],1)])],1),e._v(" "),r("el-form-item",{attrs:{label:"券发放时间",required:""}},[r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishStartTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期时间","picker-options":e.beginPickerOptions,editable:!1},model:{value:e.ruleForm.publishStartTime,callback:function(t){e.$set(e.ruleForm,"publishStartTime",t)},expression:"ruleForm.publishStartTime"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishEndTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期时间","picker-options":e.endPickerOptions,editable:!1},model:{value:e.ruleForm.publishEndTime,callback:function(t){e.$set(e.ruleForm,"publishEndTime",t)},expression:"ruleForm.publishEndTime"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"券使用有效期",required:""}},[r("div",{staticClass:"float-left"},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.ruleForm.voucherValidPeriod.type,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"type",t)},expression:"ruleForm.voucherValidPeriod.type"}},e._l(e.timeType,function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})}))],1),e._v(" "),"ABSOLUTE"===e.ruleForm.voucherValidPeriod.type?r("div",[r("div",{staticClass:"float-left ml10"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.start"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"开始日期时间",editable:!1},on:{change:e.handleStartTime},model:{value:e.ruleForm.voucherValidPeriod.start,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"start",t)},expression:"ruleForm.voucherValidPeriod.start"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.end"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"结束日期时间",editable:!1},on:{change:e.handleEndTime},model:{value:e.ruleForm.voucherValidPeriod.end,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"end",t)},expression:"ruleForm.voucherValidPeriod.end"}})],1)],1)]):r("div",[r("div",{staticClass:"float-left ml10"},[r("span",[e._v("领取后")]),e._v(" "),r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherValidPeriod.duration,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"duration",t)},expression:"ruleForm.voucherValidPeriod.duration"}}),e._v(" "),r("span",[e._v("天失效")])],1)])]),e._v(" "),r("el-form-item",{attrs:{label:"使用说明",prop:"voucherDescription"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},maxlength:250,placeholder:"最多5条，每条最多50个字符，分号隔开"},model:{value:e.ruleForm.voucherDescription,callback:function(t){e.$set(e.ruleForm,"voucherDescription",t)},expression:"ruleForm.voucherDescription"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"券核销地址",prop:"verifyUrl",rules:"link"==e.couponType?e.rules.verifyUrl:[{required:!1}]}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入核销url"},model:{value:e.ruleForm.verifyUrl,callback:function(t){e.$set(e.ruleForm,"verifyUrl",t)},expression:"ruleForm.verifyUrl"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"exchange"==e.couponType,expression:"couponType == 'exchange'"}],attrs:{label:"兑换码类型",prop:"exchangeType",rules:"exchange"==e.couponType?e.rules.exchangeType:[{required:!1}]}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.exchangeType,callback:function(t){e.$set(e.ruleForm,"exchangeType",t)},expression:"ruleForm.exchangeType"}},e._l(e.codeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"exchange"==e.couponType,expression:"couponType == 'exchange'"}],attrs:{label:"兑换码内容",prop:"exchangeCode",rules:"exchange"==e.couponType?e.rules.exchangeCode:[{required:!1}]}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"请输入描述内容"},on:{blur:function(t){return t.preventDefault(),e.handleBlur(t)}},model:{value:e.ruleForm.exchangeCode,callback:function(t){e.$set(e.ruleForm,"exchangeCode",t)},expression:"ruleForm.exchangeCode"}})],1),e._v(" "),e._l(e.ruleForm.alipassTypeList,function(t,a){return r("div",{key:a},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===t.fieldType,expression:"item.fieldType === 1"}],attrs:{label:t.description,prop:"alipassTypeList."+a+".content",rules:1==t.fieldType?e.moreNotifyOjbectRules.moreNotifyOjbectName:[{required:!1}]}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入内容",maxlength:20},model:{value:t.content,callback:function(r){e.$set(t,"content",r)},expression:"item.content"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===t.fieldType,expression:"item.fieldType === 3"}],attrs:{label:t.description,prop:"alipassTypeList."+a+".content",rules:3==t.fieldType?e.moreNotifyOjbectRules.dateTime:[{required:!1}]}},[r("el-date-picker",{staticStyle:{width:"220px"},attrs:{type:"datetime",placeholder:"开始日期时间",editable:!1},on:{change:function(t){e.handleDateType(a)}},model:{value:t.content,callback:function(r){e.$set(t,"content",r)},expression:"item.content"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===t.fieldType,expression:"item.fieldType === 2"}],attrs:{label:t.description,prop:"alipassTypeList."+a+".content",rules:2==t.fieldType?e.moreNotifyOjbectRules.pictUrl:[{required:!1}]}},[r("div",{staticClass:"comm-dis"},[r("div",{staticClass:"header-banner"},[t.content?r("img",{staticClass:"avatar",attrs:{src:t.content}}):e._e(),e._v(" "),r("span",{staticClass:"deletImg"},[r("span",{staticClass:"deletImg2",on:{click:function(t){e.handleCoverDelete(a)}}},[r("i",{staticClass:"el-icon-delete"})])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.content,expression:"!item.content"}],on:{click:function(t){e.handleUpload(a)}}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadimgUrl,"show-file-list":!1,"on-success":e.handleCoverSuccess,"before-upload":e.beforeAvatarUpload}},[r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])])],1)}),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("创建")])],1)],2)],1)])])},staticRenderFns:[]}},358:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-acoupon"},[r("div",{staticClass:"ml20 mr20 mt20"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"自有优惠券",name:"first"}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{display:"flex"},attrs:{"element-loading-text":"拼命加载中"}},[r("div",{staticClass:"pl20px pt20 pr20",staticStyle:{flex:"1.5"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"优惠券类型",prop:"voucherType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.voucherType,callback:function(t){e.$set(e.ruleForm,"voucherType",t)},expression:"ruleForm.voucherType"}},e._l(e.coupList,function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"优惠券名称",prop:"voucherName"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"不超过15个字",maxlength:20},model:{value:e.ruleForm.voucherName,callback:function(t){e.$set(e.ruleForm,"voucherName",t)},expression:"ruleForm.voucherName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商家logo",prop:"brandLogo"}},[r("div",{staticStyle:{display:"flex"}},[r("div",[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"图片url",maxlength:10},model:{value:e.ruleForm.brandLogo,callback:function(t){e.$set(e.ruleForm,"brandLogo",t)},expression:"ruleForm.brandLogo"}})],1),e._v(" "),r("div",{staticClass:"ml20"},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadimgUrl,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,limit:1,"on-exceed":e.handleExceed}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)])]),e._v(" "),r("el-form-item",{attrs:{label:"赞助商名称",prop:"brandName"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"不超过10个字",maxlength:10},model:{value:e.ruleForm.brandName,callback:function(t){e.$set(e.ruleForm,"brandName",t)},expression:"ruleForm.brandName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"券发放有效期",required:""}},[r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishStartTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期时间","picker-options":e.beginPickerOptions,editable:!1},model:{value:e.ruleForm.publishStartTime,callback:function(t){e.$set(e.ruleForm,"publishStartTime",t)},expression:"ruleForm.publishStartTime"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishEndTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期时间","picker-options":e.endPickerOptions,editable:!1},model:{value:e.ruleForm.publishEndTime,callback:function(t){e.$set(e.ruleForm,"publishEndTime",t)},expression:"ruleForm.publishEndTime"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"券使用有效期",required:""}},[r("div",{staticClass:"float-left"},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.voucherValidPeriod.type,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"type",t)},expression:"ruleForm.voucherValidPeriod.type"}},e._l(e.timeType,function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})}))],1),e._v(" "),"ABSOLUTE"===e.ruleForm.voucherValidPeriod.type?r("div",[r("div",{staticClass:"float-left ml10"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.start"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"开始日期时间",editable:!1},on:{change:e.handleStartTime},model:{value:e.ruleForm.voucherValidPeriod.start,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"start",t)},expression:"ruleForm.voucherValidPeriod.start"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.end"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"结束日期时间",editable:!1},on:{change:e.handleEndTime},model:{value:e.ruleForm.voucherValidPeriod.end,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"end",t)},expression:"ruleForm.voucherValidPeriod.end"}})],1)],1)]):r("div",[r("div",{staticClass:"float-left ml10"},[r("span",[e._v("领取后")]),e._v(" "),r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherValidPeriod.duration,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"duration",t)},expression:"ruleForm.voucherValidPeriod.duration"}}),e._v(" "),r("span",[e._v("天失效")])],1)])]),e._v(" "),r("el-form-item",{attrs:{label:"优惠券面额",prop:"amount"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"输入整数",maxlength:10},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"使用条件",prop:"hasLimitMoney"}},[r("el-radio-group",{model:{value:e.ruleForm.hasLimitMoney,callback:function(t){e.$set(e.ruleForm,"hasLimitMoney",t)},expression:"ruleForm.hasLimitMoney"}},[r("div",[r("el-radio",{attrs:{label:"0"}},[e._v("无限制")])],1),e._v(" "),r("div",[r("el-radio",{staticClass:"mr10",attrs:{label:"1"}},[e._v("单笔消费满")]),e._v(" "),r("el-input",{staticClass:"mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:10},model:{value:e.ruleForm.floorAmount,callback:function(t){e.$set(e.ruleForm,"floorAmount",t)},expression:"ruleForm.floorAmount"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("元，使用(1-9999)整数")])],1)])],1),e._v(" "),r("el-form-item",{attrs:{label:"单人领取次数限制",prop:"hasLimitQuantity"}},[r("el-radio-group",{model:{value:e.ruleForm.hasLimitQuantity,callback:function(t){e.$set(e.ruleForm,"hasLimitQuantity",t)},expression:"ruleForm.hasLimitQuantity"}},[r("div",[r("el-radio",{attrs:{label:"0"}},[e._v("无限制")])],1),e._v(" "),r("div",[r("el-radio",{staticClass:"mr10",attrs:{label:"1"}},[e._v("单人每天可领")]),e._v(" "),r("el-input",{staticClass:"mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perDailyQuantity,callback:function(t){e.$set(e.ruleForm,"perDailyQuantity",t)},expression:"ruleForm.perDailyQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次，最多可领")]),e._v(" "),r("el-input",{staticClass:"ml10 mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perMaxQuantity,callback:function(t){e.$set(e.ruleForm,"perMaxQuantity",t)},expression:"ruleForm.perMaxQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次(1-50)整数")])],1)])],1),e._v(" "),r("el-form-item",{attrs:{label:"券总数",prop:"voucherQuantity"}},[r("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherQuantity,callback:function(t){e.$set(e.ruleForm,"voucherQuantity",t)},expression:"ruleForm.voucherQuantity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"限定商品",prop:"hasLimitGoods"}},[r("el-radio-group",{model:{value:e.ruleForm.hasLimitGoods,callback:function(t){e.$set(e.ruleForm,"hasLimitGoods",t)},expression:"ruleForm.hasLimitGoods"}},[r("div",[r("el-radio",{attrs:{label:"0"}},[e._v("无限制")])],1),e._v(" "),r("div",{staticClass:"mt10"},[r("el-radio",{staticClass:"mr10",attrs:{label:"1"}},[e._v("部分商品")])],1)])],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.ruleForm.hasLimitGoods,expression:"ruleForm.hasLimitGoods == 1"}],attrs:{prop:"goods"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},maxlength:100,placeholder:"最多输入50个商品ID，同一订单中有多个商品，不叠加优惠,商品Id以逗号隔开"},model:{value:e.ruleForm.goods,callback:function(t){e.$set(e.ruleForm,"goods",t)},expression:"ruleForm.goods"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"券描述"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5},maxlength:100,placeholder:"请输入描述内容"},model:{value:e.ruleForm.voucherIntroduction,callback:function(t){e.$set(e.ruleForm,"voucherIntroduction",t)},expression:"ruleForm.voucherIntroduction"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"使用说明",prop:"voucherDescription"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5},maxlength:255,placeholder:"请输入描述内容"},model:{value:e.ruleForm.voucherDescription,callback:function(t){e.$set(e.ruleForm,"voucherDescription",t)},expression:"ruleForm.voucherDescription"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"通知类型",prop:"notifyType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.notifyType,callback:function(t){e.$set(e.ruleForm,"notifyType",t)},expression:"ruleForm.notifyType"}},e._l(e.noticList,function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"券核销地址",prop:"verifyUrl",rules:3==e.ruleForm.voucherType?e.rules.verifyUrl:[{required:!1}]}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入核销url"},model:{value:e.ruleForm.verifyUrl,callback:function(t){e.$set(e.ruleForm,"verifyUrl",t)},expression:"ruleForm.verifyUrl"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"sms"===e.ruleForm.notifyType,expression:"ruleForm.notifyType === 'sms'"}],attrs:{label:"短信模版ID",prop:"notifyId",rules:"sms"==e.ruleForm.notifyType?e.rules.notifyId:[{required:!1}]}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入模版ID"},model:{value:e.ruleForm.notifyId,callback:function(t){e.$set(e.ruleForm,"notifyId",t)},expression:"ruleForm.notifyId"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.ruleForm.voucherType,expression:"ruleForm.voucherType == 2"}],attrs:{label:"兑换码类型",prop:"exchangeType",rules:2==e.ruleForm.voucherType?e.rules.exchangeType:[{required:!1}]}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.exchangeType,callback:function(t){e.$set(e.ruleForm,"exchangeType",t)},expression:"ruleForm.exchangeType"}},e._l(e.codeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.ruleForm.voucherType,expression:"ruleForm.voucherType == 2"}],attrs:{label:"兑换码内容",prop:"exchangeCode",rules:2==e.ruleForm.voucherType?e.rules.exchangeCode:[{required:!1}]}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"请输入描述内容"},on:{blur:function(t){return t.preventDefault(),e.handleBlur(t)}},model:{value:e.ruleForm.exchangeCode,callback:function(t){e.$set(e.ruleForm,"exchangeCode",t)},expression:"ruleForm.exchangeCode"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")])],1)],1)],1),e._v(" "),r("div",{staticStyle:{flex:"1"}},[r("div",{staticClass:"exhibtion"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.ruleForm.brandLogo}})]),e._v(" "),r("div",{staticClass:"voucher-name"},[e._v(e._s(e.ruleForm.voucherName))]),e._v(" "),r("div",{staticClass:"voucher-title"},[e._v(e._s(e.ruleForm.brandName))]),e._v(" "),r("div",{staticClass:"ml20"},[r("ul",["0"===e.ruleForm.hasLimitMoney?r("li",[r("span",[e._v("无限制")])]):r("li",[r("span",[e._v("消费满"+e._s(e.ruleForm.floorAmount)+"使用")])]),e._v(" "),"ABSOLUTE"===e.ruleForm.voucherValidPeriod.type?r("li",[r("span",[e._v(e._s(e.startTime))]),e._v("至\n                    "),r("span",[e._v(e._s(e.endTime))])]):r("li",[e._v("\n                    领取\n                    "),r("span",[e._v(e._s(e.ruleForm.voucherValidPeriod.duration)+"天后失效")])])])])])])])]),e._v(" "),r("el-tab-pane",{attrs:{label:"支付宝优惠券",name:"second"}},[r("add-apli-coupon")],1),e._v(" "),r("el-tab-pane",{attrs:{label:"支付宝模版券",name:"third"}},[r("apli-template-coupon")],1)],1)],1)])},staticRenderFns:[]}},362:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-apli-acoupon"},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticClass:"pl20px pt20 pr20",staticStyle:{flex:"1.5"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"优惠券类型",prop:"voucherType"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.voucherType,callback:function(t){e.$set(e.ruleForm,"voucherType",t)},expression:"ruleForm.voucherType"}},e._l(e.voucherList,function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"商户pid",prop:"pid"}},[r("el-input",{staticStyle:{width:"220px"},model:{value:e.ruleForm.pid,callback:function(t){e.$set(e.ruleForm,"pid",t)},expression:"ruleForm.pid"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"COUPON"===e.ruleForm.voucherType,expression:"ruleForm.voucherType === 'COUPON'"}],attrs:{label:"模板总金额",prop:"totalAmount",rules:"COUPON"===e.ruleForm.totalAmount?e.rules.voucherType:[{required:!1}]}},[r("el-input",{staticStyle:{width:"220px"},model:{value:e.ruleForm.totalAmount,callback:function(t){e.$set(e.ruleForm,"totalAmount",t)},expression:"ruleForm.totalAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商家名称",prop:"brandName"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入商家名称",maxlength:12},model:{value:e.ruleForm.brandName,callback:function(t){e.$set(e.ruleForm,"brandName",t)},expression:"ruleForm.brandName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出资人登陆帐号",prop:"fundAccount"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入出资人帐号"},model:{value:e.ruleForm.fundAccount,callback:function(t){e.$set(e.ruleForm,"fundAccount",t)},expression:"ruleForm.fundAccount"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"COUPON"!==e.ruleForm.voucherType,expression:"ruleForm.voucherType !== 'COUPON'"}],attrs:{label:"券总数",prop:"voucherQuantity",rules:"COUPON"!==e.ruleForm.voucherType?e.rules.voucherQuantity:[{required:!1}]}},[r("el-input",{staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherQuantity,callback:function(t){e.$set(e.ruleForm,"voucherQuantity",t)},expression:"ruleForm.voucherQuantity"}}),e._v(" "),r("span",[e._v("张(1-9999整数)")])],1),e._v(" "),r("el-form-item",{attrs:{label:"每人领取次数限制",prop:"hasLimitQuantity"}},[r("el-radio-group",{model:{value:e.ruleForm.hasLimitQuantity,callback:function(t){e.$set(e.ruleForm,"hasLimitQuantity",t)},expression:"ruleForm.hasLimitQuantity"}},[r("div",[r("el-radio",{attrs:{label:"0"}},[e._v("无限制")])],1),e._v(" "),r("div",[r("el-radio",{staticClass:"mr10",attrs:{label:"1"}},[e._v("单人每天可领")]),e._v(" "),r("el-input",{staticClass:"mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perDailyQuantity,callback:function(t){e.$set(e.ruleForm,"perDailyQuantity",t)},expression:"ruleForm.perDailyQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次，最多可领")]),e._v(" "),r("el-input",{staticClass:"ml10 mr10 w100",staticStyle:{width:"110px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.perMaxQuantity,callback:function(t){e.$set(e.ruleForm,"perMaxQuantity",t)},expression:"ruleForm.perMaxQuantity"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("次(1-50)整数")])],1)])],1),e._v(" "),r("el-form-item",{attrs:{label:"券发放时间",required:""}},[r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishStartTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期时间","picker-options":e.beginPickerOptions,editable:!1},model:{value:e.ruleForm.publishStartTime,callback:function(t){e.$set(e.ruleForm,"publishStartTime",t)},expression:"ruleForm.publishStartTime"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"publishEndTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期时间","picker-options":e.endPickerOptions,editable:!1},model:{value:e.ruleForm.publishEndTime,callback:function(t){e.$set(e.ruleForm,"publishEndTime",t)},expression:"ruleForm.publishEndTime"}})],1)],1)]),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"COUPON"!==e.ruleForm.voucherType,expression:"ruleForm.voucherType !== 'COUPON'"}],attrs:{label:"优惠券面额",prop:"amount",rules:"COUPON"!==e.ruleForm.voucherType?e.rules.amount:[{required:!1}]}},[r("el-input",{staticStyle:{width:"220px"},attrs:{type:"number",placeholder:"数值不能小于0.1",maxlength:10},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最低消费金额",prop:"floorAmount"}},[r("div",[r("el-input",{staticClass:"mr10 w100",staticStyle:{width:"150px"},attrs:{placeholder:"数值不能小于0",maxlength:8},nativeOn:{input:function(t){e.inputOnlyFix()}},model:{value:e.ruleForm.floorAmount,callback:function(t){e.$set(e.ruleForm,"floorAmount",t)},expression:"ruleForm.floorAmount"}}),e._v(" "),r("span",{staticClass:"fs14"},[e._v("元，保留小数点后两位")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"券使用有效期",required:""}},[r("div",{staticClass:"float-left"},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.ruleForm.voucherValidPeriod.type,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"type",t)},expression:"ruleForm.voucherValidPeriod.type"}},e._l(e.timeType,function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})}))],1),e._v(" "),"ABSOLUTE"===e.ruleForm.voucherValidPeriod.type?r("div",[r("div",{staticClass:"float-left ml10"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.start"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"开始日期时间",editable:!1},on:{change:e.handleStartTime},model:{value:e.ruleForm.voucherValidPeriod.start,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"start",t)},expression:"ruleForm.voucherValidPeriod.start"}})],1)],1),e._v(" "),r("div",{staticClass:"float-left ml10 mr10"},[e._v("-")]),e._v(" "),r("div",{staticClass:"float-left"},[r("el-form-item",{attrs:{prop:"voucherValidPeriod.end"}},[r("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"datetime",placeholder:"结束日期时间",editable:!1},on:{change:e.handleEndTime},model:{value:e.ruleForm.voucherValidPeriod.end,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"end",t)},expression:"ruleForm.voucherValidPeriod.end"}})],1)],1)]):r("div",[r("div",{staticClass:"float-left ml10"},[r("span",[e._v("领取后")]),e._v(" "),r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"输入整数",maxlength:5},model:{value:e.ruleForm.voucherValidPeriod.duration,callback:function(t){e.$set(e.ruleForm.voucherValidPeriod,"duration",t)},expression:"ruleForm.voucherValidPeriod.duration"}}),e._v(" "),r("span",[e._v("天失效")])],1)])]),e._v(" "),r("el-form-item",{attrs:{label:"使用说明",prop:"voucherDescription"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},maxlength:250,placeholder:"最多5条，每条最多50个字符，分号隔开"},model:{value:e.ruleForm.voucherDescription,callback:function(t){e.$set(e.ruleForm,"voucherDescription",t)},expression:"ruleForm.voucherDescription"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交，去付款")])],1)],1)],1),e._v(" "),r("div",{staticStyle:{flex:"1"}},[r("div",{staticClass:"exhibtion"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.logoImg}})]),e._v(" "),r("div",{staticClass:"voucher-title"},[e._v(e._s(e.ruleForm.brandName))]),e._v(" "),r("div",{staticClass:"ml20"},[r("ul",[r("li",[r("span",[e._v("消费满"+e._s(e.ruleForm.floorAmount)+"使用")])]),e._v(" "),"ABSOLUTE"===e.ruleForm.voucherValidPeriod.type?r("li",[r("span",[e._v(e._s(e.startTime))]),e._v("至\n                            "),r("span",[e._v(e._s(e.endTime))])]):r("li",[e._v("\n                            领取\n                            "),r("span",[e._v(e._s(e.ruleForm.voucherValidPeriod.duration)+"天后失效")])])])])])])])])},staticRenderFns:[]}},52:function(e,t,r){var a=r(18)(r(153),r(358),function(e){r(297),r(298)},"data-v-53d5f427",null);e.exports=a.exports},79:function(e,t,r){e.exports=r(0)(12)},80:function(e,t,r){e.exports=r(0)(5)},81:function(e,t,r){"use strict";var a={};a.netImg="http://operation.allcitygo.com/",a.nethost="https://bmapi.allcitygo.com:13002/op/",t.a=a},82:function(e,t,r){"use strict";r.d(t,"b",function(){return m}),r.d(t,"a",function(){return h});var a=r(108),i=r.n(a),o=r(83),n=r.n(o),l=r(118),s=r.n(l),u=(r(81),r(3));r.n(u),r(91),window.sessionStorage.getItem("ak")||window.localStorage.getItem("ak");window.Promise||(window.Promise=n.a);var c=function(e){var t=e.data;return t.code,0===t.code?t:2e4==t.code?t:302!==t.code&&(5===t.code&&u.Message.error("系统维护中，请稍后再试。"),n.a.reject(e.data,e))},d=function(e){return n.a.reject(e.response.data||{},e.response)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,a=e.params,o=void 0===a?{}:a,n=e.method,l=void 0===n?"":n,u=e.url,p=void 0===u?"":u,m=e.headers,h=void 0===m?{}:m,v={method:l,url:p,data:r,params:o,responseType:"json",withCredentials:!0};return v.headers={"Content-Type":"application/json; charset=UTF-8",access_token:function(){for(var e=(document.cookie||"x-access-token=5C832D5723B675A760DB5B7A6B901229").split("; "),t=0;t<e.length;t++){var r=e[t].split("=");if("x-access-token"==r[0])return r[1]}}()},i()(v.headers,h),i()(v.params,{_:(new Date).getTime()}),s()(v).then(c,d)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p({url:e,method:"GET",params:t,headers:r})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p({url:e,method:"POST",data:t,headers:r})}},83:function(e,t,r){e.exports={default:r(94),__esModule:!0}},84:function(e,t,r){e.exports=r(0)(128)},85:function(e,t,r){e.exports=r(0)(17)},86:function(e,t,r){e.exports=r(0)(54)},87:function(e,t,r){var a=r(86),i=r(79)("toStringTag"),o="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?a(t):"Object"==(n=a(t))&&"function"==typeof t.callee?"Arguments":n}},88:function(e,t,r){var a,i,o,n=r(84),l=r(97),s=r(109),u=r(117),c=r(80),d=c.process,p=c.setImmediate,m=c.clearImmediate,h=c.MessageChannel,v=0,f={},g="onreadystatechange",y=function(){var e=+this;if(f.hasOwnProperty(e)){var t=f[e];delete f[e],t()}},x=function(e){y.call(e.data)};p&&m||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return f[++v]=function(){l("function"==typeof e?e:Function(e),t)},a(v),v},m=function(e){delete f[e]},"process"==r(86)(d)?a=function(e){d.nextTick(n(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=x,a=n(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(a=function(e){c.postMessage(e+"","*")},c.addEventListener("message",x,!1)):a=g in u("script")?function(e){s.appendChild(u("script"))[g]=function(){s.removeChild(this),y.call(e)}}:function(e){setTimeout(n(y,e,1),0)}),e.exports={set:p,clear:m}},89:function(e,t,r){e.exports=r(0)(125)},90:function(e,t,r){e.exports=r(0)(27)},91:function(e,t,r){"use strict";var a=r(83),i=r.n(a),o=r(81),n=(r(82),r(82)),l=o.a.nethost;t.a={getDetail:function(e){var t=l+"prefer/icons/manage";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getFavorites:function(){var e=l+"prefer/tbk/getFavorites";return r.i(n.a)(e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},updateDetail:function(e){var t=l+"prefer/icons/manage/update";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getBaseDetail:function(){var e=l+"prefer/hzCard/icons";return r.i(n.a)(e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},upBaseDateDetail:function(e){var t=l+"prefer/hzCard/update";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},deleteDetail:function(e){var t=l+"prefer/secondIcon/delete?secondIconId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e.data||e)},function(e){return i.a.reject(e.data||e)})},getSecondeInfor:function(e){var t=l+"prefer/secondIcon/get?parentIconId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e.data||e)})},addNotice:function(e){var t=l+"prefer/notice/addNotice";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},deleteNotice:function(e){var t=l+"prefer/notice/deleteNotice?noticeId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},getNoticeByParam:function(e){var t=l+"prefer/notice/getNoticeByParam";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},updateNotice:function(e){var t=l+"prefer/notice/addNotice";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},addBus:function(e){var t=l+"prefer/icon/addNew";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},deleteBus:function(e){var t=l+"prefer/icon/delete?iconId="+e;return r.i(n.a)(t).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},getByParamBus:function(e){var t=l+"prefer/icon/getByParam";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})},updateBus:function(e){var t=l+"prefer/icon/update";return r.i(n.a)(t,e).then(function(e){return i.a.resolve(e)},function(e){return i.a.reject(e)})}}},92:function(e,t,r){e.exports=r(0)(11)},93:function(e,t,r){e.exports=r(0)(9)},94:function(e,t,r){r(111),r(112),r(113),r(106),e.exports=r(2).Promise},95:function(e,t){e.exports=function(e,t,r,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(r+": incorrect invocation!");return e}},96:function(e,t,r){var a=r(84),i=r(99),o=r(98),n=r(85),l=r(110),s=r(105),u={},c={};(t=e.exports=function(e,t,r,d,p){var m,h,v,f,g=p?function(){return e}:s(e),y=a(r,d,t?2:1),x=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(m=l(e.length);m>x;x++)if((f=t?y(n(h=e[x])[0],h[1]):y(e[x]))===u||f===c)return f}else for(v=g.call(e);!(h=v.next()).done;)if((f=i(v,y,h.value,t))===u||f===c)return f}).BREAK=u,t.RETURN=c},97:function(e,t){e.exports=function(e,t,r){var a=void 0===r;switch(t.length){case 0:return a?e():e.call(r);case 1:return a?e(t[0]):e.call(r,t[0]);case 2:return a?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},98:function(e,t,r){var a=r(90),i=r(79)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[i]===e)}},99:function(e,t,r){var a=r(85);e.exports=function(e,t,r,i){try{return i?t(a(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&a(o.call(e)),t}}}});